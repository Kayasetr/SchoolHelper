function htmlEscape(a){if(!a){return""}a+="";var b=a.replace(/</g,"&lt;");b=b.replace(/>/g,"&gt;");b=b.replace(/\"/g,"&quot;");return b}function endClick(a){if(a){a.preventDefault()}return true}function makeRef(b){var a=location.pathname.split("/");if(a.length<2){return"/"+ChemSys.curLang+"/"+b}if(a.length==2){a.push(b)}else{a[2]=b}return a.join("/")}function createTestForm(d,a,b){var c=$("<form/>").attr({method:"post",action:makeRef("test")}).addClass("test-form");if(b){c.appendTo(b)}$("<input/>").attr({type:"hidden",name:"formula"}).val(d).appendTo(c);if(a){if(a.indexOf("В§")<0){a="В§"+ChemSys.curLang+a}$("<input/>").attr({type:"hidden",name:"name"}).val(a).appendTo(c)}$("<input/>").attr({type:"image",title:ChemSys.lang("Test Stand"),src:"/img/stand.png"}).appendTo(c);return c}function applyTempl(d,b){var a,c=document.getElementById(d);if(c){a=c.innerHTML}else{if(d in window){a=window[d]}else{return""}}return applyTemplS(a,b)}function applyTemplS(e,d){var c,b=0,a,f;for(c in d){e=e.replace(new RegExp("(`|%60|\\$)"+c+"(`|%60|\\$)","g"),d[c])}for(;;){b=e.indexOf("<!--if ",b);if(b<0){break}a=e.indexOf(" ",b+7);if(b<0){break}c=e.substring(b+7,a);if(f=c.charAt(0)=="!"){c=c.substring(1)}if(!(c in d)||(d[c])){b=a+4}else{a=e.indexOf("<!--endif "+c,a);if(a<0){break}a=e.indexOf(">",a);if(a<0){break}e=e.substring(0,b)+e.substring(a+1)}}return e}$(function(){$(".cmd-update").trigger("cmdUpdate");$(".content-area").each(function(){var b=$(".content-box",this);$("a[name]",this).each(function(){$("<a/>").attr("href","#"+$(this).attr("name")).text($(this).parent().text()).appendTo($("<li/>").appendTo(b))})});$(".lmenu-item .switcher-item").click(function(){var b=$(this).parents("li:first"),d=b.find("ul:first"),c=d.is(":visible");if(c){d.slideUp(400)}else{d.slideDown(400)}$(this).toggleClass("open",!c)});$(document).on("click",".result-switcher",function(){var d=$(this).next().toggle(),b=d.is(":visible");$(this).toggleClass("open",b);var c=$(this).data("locid");if(c&&Modernizr.localstorage){localStorage["switcher_"+c]=b?"on":"off"}return false});$(".result-switcher").each(function(){var c=$(this).data("locid");if(Modernizr.localstorage&&c){var d=$(this).next(),b=localStorage["switcher_"+c];if(b){$(this).toggleClass("open",b=="on");d.toggle(b=="on")}}});function a(b){$("#warnings-box").append(applyTempl(b,{}))}if(!Modernizr.canvas){a("no-canvas-warning")}else{if(!Modernizr.canvastext){a("no-canvas-text")}}});function AsyncRequest(c,b){b=b||1000;var g=[],d=[];var f=null;this.isActive=function(){return f!=null};function e(){f=new Object();f.ok=true;return f}function a(h){h.ok=false;if(h==f){f=null}}this.addHandler=function(j,i,k){var h=i?d:g;if(k){h.length=0}if(j){h.push(j)}};this.request=function(o,n,i,l){this.cancel();this.addHandler(n);this.addHandler(i,1);var j=e();function k(r,p){if(!j.ok){return}for(var q in d){d[q](r,p)}if(l){l()}a(j)}function h(p){if(!j.ok){return}if(p.error!==undefined){return k(p.error||lang("Server Error"),p)}if(p.result=="RID"){o.rid=p.RID;setTimeout(m,b);return}a(j);for(var q in g){g[q](p)}g.length=0;if(l){l()}}function m(){if(!j.ok){return}$.ajax({url:c,data:o,type:"post",dataType:"json",success:h,error:function(q,p,r){k("РћС€РёР±РєР° Р·Р°РїСЂРѕСЃР°. "+p+": "+r)}})}m()};this.cancel=function(){g.length=0;d.length=0;if(f){a(f)}}}function getLocalSt(c,b){if(!Modernizr.localstorage){return b}var a=localStorage[c];if(a===undefined){a=b}return a}function setLocalSt(a,c){if(Modernizr.localstorage){try{localStorage[a]=c}catch(b){}}}function setCookie(b,d,a,f,c,e){document.cookie=b+"="+escape(d)+((a)?"; expires="+a:"")+((f)?"; path="+f:"")+((c)?"; domain="+c:"")+((e)?"; secure":"")}function initLangCtrlMain(a){function c(g,h){var j=$(g).val(),f,e=j.split(","),d=[];for(f in e){j=$.trim(e[f]);if(j){d.push(j)}}j=d.join(",");setCookie("PrefLangs",j)}function b(){c(this)}initLangsCtrl(a,c);$(a).keyup(b).change(b)}function initLangsCtrl(a,b){var d=$(a);var c=$("#PopupLangsBox");$(a).next().click(function(){var g,h=d.val().split(","),f=d.offset(),l=$(this).offset();o(h);f.top+=d.height();f.left=l.left+$(this).outerWidth()-c.outerWidth();for(g in h){h[g]=$.trim(h[g])}function m(){$("body").unbind("click",m);c.fadeOut(200,function(){c.hide()})}$("body").click(m).keyup(function(i){if(i.which==27){m()}});c.show().css(f).unbind().click(function(i){i.stopPropagation()});function n(q,i){var p=$(q).find("input");if(i<0){i=!p.prop("checked")}else{i=!!i}p.prop("checked",i);$(q).toggleClass("checked",i)}function e(){var i=[];c.find("tr.checked").each(function(){i.push($(this).attr("id").split("-")[1])});return i}function k(i){n(i,-1);var p=e();d.val(p.join(","));o(p)}function j(q,p){q=$(q);var i=q.find("a[href=#up]").unbind();if(!p){i.css("visibility","hidden")}else{i.css("visibility","visible").click(function(u){u.stopPropagation();u.preventDefault();var t=q.parents("table");var s=q.prev();q.insertBefore(s);var r=t.find("tr").index(q);j(q,r);j(s,s.hasClass("checked"));d.val(e().join(","));return false})}}function o(t){var w,q,v={},s,u=c.find("table"),p=u.find("tr").each(function(){var x=$(this).attr("id");var i=x.split("-")[1];v[i]=this}).remove();for(q in t){w=t[q];s=v[w];if(!s){continue}u.append(s);n(s,1);j(s,+q);delete v[w]}var r=[];for(q in v){r.push(q)}r.sort();for(q in r){w=r[q];u.append(v[w]);n(v[w],0);j(v[w],0)}c.find("tr").click(function(i){k(this)});c.find("input").click(function(i){i.stopPropagation();k($(this).parents("tr"))});if(b){b(d,t)}}return false})}function detectLang(k){function l(c){if("Г„Г¤Г–Г¶ГњГјГџ".indexOf(c)>=0){return"de"}if("Г‰Г©Г‚ГўГЉГЄГЋГ®Г”ГґГ›Г»ГЂГ Г€ГЁГ™Г№Г‹Г«ГЏГЇГњГјЕёГїГ‡Г§".indexOf(c)>=0){return"fr"}if("Г‘Г±ГЃГ‰ГЌГ“ГљГЎГ©Г­ГіГє".indexOf(c)>=0){return"es"}var i=c.charCodeAt(0);if((i>=65&&i<=90)||(i>=97&&i<=122)){return"la"}if(i>=1024&&i<1120){return"ru"}if(i>=900&&i<=993){return"el"}if((i>=1536&&i<=1791)||(i>=1872&&i<=1919)||(i>=64336&&i<=65023)||(i>=65136&&i<=65279)){return"ar"}if(i>=2304&&i<=2431){return"hi"}if((i>=1424&&i<=1535)||(i>=64285&&i<=64320)){return"he"}if((i>=44032&&i<=55203)||(i>=4352&&i<=4607)){return"ko"}if((i>=12448&&i<=12543)||(i>=12352&&i<=12447)){return"ja"}if((i>=19968&&i<=40869)||(i>=131072&&i<=173782)){return"zh"}return false}var d,h,f,g={};for(d=0;d<k.length;d++){h=k.charAt(d);f=l(h);if(!f){continue}if(!(f in g)){g[f]=0}g[f]++}var e=0,j="en",a=0,b={de:1,fr:1,es:1,ja:1};for(f in g){d=g[f];if(d>e){e=d;j=f}if(b[f]){a=f}}if(a){return a}if(j=="la"){return"en"}return j}function enableElem(b,a){var c=$(b);c.toggleClass("disabled",!a);if(a){c.removeAttr("disabled")}else{c.attr("disabled","disabled")}}function drawNamerRes(k,c){var g,e,l,h,o,n,m,d,b,a;function f(j,i){return $.extend({mass:ChemSys.calcMass(j),brutto:ChemSys.makeBrutto(j).html(),BKey:ChemSys.makeBruttoKey(j)},i)}for(g in k.subst){l=k.subst[g];h=l.lst[0].toString();n=ChemSys.compile(h);m=$(applyTempl("TmNamerSubst",f(n,l))).appendTo($(c));d=m.find(".j-formulas");for(e in l.lst){h=l.lst[e].toString();n=ChemSys.compile(h);b=$(applyTempl("TmNamerFormula",f(n))).appendTo(d);a=b.find(".echem-formula");ChemJQ.draw(n,a);createTestForm(h,l.name,a)}}}if(bMetricEnable){(function(g,a,i){(a[i]=a[i]||[]).push(function(){try{a.yaCounter20180266=new Ya.Metrika({id:20180266,clickmap:true,trackLinks:true,accurateTrackBounce:true})}catch(c){}});var h=g.getElementsByTagName("script")[0],b=g.createElement("script"),e=function(){h.parentNode.insertBefore(b,h)};b.type="text/javascript";b.async=true;b.src=(g.location.protocol=="https:"?"https:":"http:")+"//mc.yandex.ru/metrika/watch.js";if(a.opera=="[object Opera]"){g.addEventListener("DOMContentLoaded",e,false)}else{e()}})(document,window,"yandex_metrika_callbacks")};